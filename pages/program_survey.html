<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Program Survey - CSNHS</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
        }
        .survey-container {
            background: #ffffff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
        }
        .survey-question {
            margin-bottom: 15px;
        }
        .survey-question h6 {
            margin-bottom: 10px;
        }
        .hidden {
            display: none;
        }
        .navbar .navbar-brand img {
            width: 40px;
            height: 40px;
            object-fit: cover;
            border-radius: 50%;
            margin-right: 10px;
        }
        .result-container {
            display: none;
            margin-top: 20px;
        }
        .result-container h4 {
            margin-bottom: 20px;
        }
        .result-container ul {
            list-style-type: none;
            padding: 0;
        }
        .result-container ul li {
            margin-bottom: 10px;
        }
        .chart-container {
            margin-top: 20px;
        }
    </style>
    <script src="../js/surveyQuestions.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm p-3">
        <div class="container">
            <!-- Logo Image -->
            <a class="navbar-brand d-flex align-items-center" href="home.html">
                <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQHn_cZ7BsKJw5JMWR0ibGgVjkVitWBtKr1qA&s" alt="CSNHS Logo">
                CSNHS Research Management System
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="home.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="program_survey.html">Check my Program</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="container mt-4">
        <div class="row">
            <!-- Sidebar Start -->
            <aside class="col-md-5 sidebar">
                <div class="overview card">
                    <div class="card-body">
                        <div id="overview-content">
                            <h6>Overview of Camarines Sur National High School</h6>
                            <p style="text-align: justify;">
                                <b>Camarines Sur National High School (CSNHS)</b>, founded on <b>June 15, 1902</b>, is one
                                of the oldest and largest public secondary schools in the Bicol Region. Initially
                                established as the <b>Provincial High School of Nueva Caceres</b>, it later became
                                <b>Camarines High School</b> before being converted into CSNHS in 1969 under <b>Republic Act
                                    5529</b>. Over the decades, the school expanded its programs and facilities, emphasizing
                                academic excellence and holistic development.
                            </p>

                            <p style="text-align: justify;">
                                CSNHS offers specialized programs such as the <b>Science, Technology, and Engineering (STE)
                                    Program</b>, <b>Special Program in Foreign Language (SPFL)</b>, <b>Special Program in
                                    the Arts (SPA)</b>, <b>Special Program in Journalism (SPJ)</b>, <b>Special Program for
                                    Technical-Vocational Education (SPTVE)</b>, and <b>Special Program in Sports (SPS)</b>.
                                These programs cater to students' diverse talents and career aspirations, integrating
                                research, innovation, and skills development.
                            </p>

                            <p style="text-align: justify;">
                                Currently led by <b>Dr. Sulpicio C. Alferez III</b>, CSNHS continues to excel in academics,
                                sports, and extracurricular activities. It has produced top researchers, athletes, and
                                artists, receiving national and international recognition. The school remains committed to
                                providing quality education, fostering leadership, and preparing students for global
                                opportunities. Its legacy of excellence ensures that it remains a premier institution in the
                                region.
                            </p>
                        </div>
                    </div>
                </div>
            </aside>
            <!-- Sidebar End -->

            <main class="col-md-7">
                <div class="survey-container">
                    <h3 class="text-center">Program Survey</h3>
                    <p class="text-center">Answer the following questions to help determine which program is best suited for you.</p>
                    <form id="survey-form">
                        <!-- Questions will be dynamically loaded here -->
                    </form>
                    <!-- Navigation Buttons -->
                    <div class="text-center mt-4">
                        <button type="button" class="btn btn-primary" id="next-button">Next</button>
                    </div>
                </div>
                <div class="result-container card">
                    <div class="card-body">
                        <h4>Recommended Program</h4>
                        <p id="recommended-program"></p>
                        <h5>Strengths:</h5>
                        <ul id="strengths-list"></ul>
                        <h5>Weaknesses:</h5>
                        <ul id="weaknesses-list"></ul>
                        <h5>Needs to Improve:</h5>
                        <ul id="improve-list"></ul>
                        <h5>Helpful Websites:</h5>
                        <ul id="websites-list"></ul>
                        <div class="chart-container">
                            <canvas id="program-chart"></canvas>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const navbarToggler = document.querySelector('.navbar-toggler');
            const navbarCollapse = document.querySelector('.navbar-collapse');

            navbarToggler.addEventListener('click', function () {
                navbarCollapse.classList.toggle('show');
            });

            const surveyForm = document.getElementById('survey-form');
            surveyQuestions.forEach((item, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.classList.add('survey-question', 'hidden');
                questionDiv.id = `question-${index + 1}`;
                questionDiv.innerHTML = `
                    <h6>${index + 1}. ${item.question}</h6>
                    <input type="radio" name="q${index + 1}" value="yes"> Yes
                    <input type="radio" name="q${index + 1}" value="no"> No
                `;
                surveyForm.appendChild(questionDiv);
            });

            let currentQuestion = 1;
            const totalQuestions = surveyQuestions.length;
            const answers = [];

            document.getElementById(`question-${currentQuestion}`).classList.remove('hidden');

            document.getElementById('next-button').addEventListener('click', function () {
                const selectedOption = document.querySelector(`input[name="q${currentQuestion}"]:checked`);
                if (selectedOption) {
                    answers.push({ answer: selectedOption.value, program: surveyQuestions[currentQuestion - 1].program });
                    document.getElementById(`question-${currentQuestion}`).classList.add('hidden');
                    currentQuestion++;
                    if (currentQuestion <= totalQuestions) {
                        document.getElementById(`question-${currentQuestion}`).classList.remove('hidden');
                    } else {
                        const program = determineProgram(answers);
                        displayResults(program, answers);
                    }
                } else {
                    alert('Please select an answer before proceeding.');
                }
            });

            function determineProgram(answers) {
                const programScores = {
                    "Science, Technology, and Engineering (SPSTE)": 0,
                    "Special Program for Technical-Vocational Education (SPTVE)": 0,
                    "Special Program in Foreign Language (SPFL)": 0,
                    "Special Program in Journalism (SPJ)": 0,
                    "Special Program in Sports (SPS)": 0,
                    "Special Program in the Arts (SPA)": 0
                };

                answers.forEach((item) => {
                    if (item.answer === 'yes') {
                        programScores[item.program]++;
                    }
                });

                return Object.keys(programScores).reduce((a, b) => programScores[a] > programScores[b] ? a : b);
            }

            function displayResults(program, answers) {
                document.querySelector('.survey-container').style.display = 'none';
                const resultContainer = document.querySelector('.result-container');
                resultContainer.style.display = 'block';

                document.getElementById('recommended-program').textContent = program;

                const strengths = ["Analytical thinking", "Problem-solving", "Collaboration"];
                const weaknesses = ["Time management", "Technical skills"];
                const improve = ["Communication", "Leadership"];
                const websites = ["https://www.khanacademy.org", "https://www.coursera.org"];

                strengths.forEach(strength => {
                    const li = document.createElement('li');
                    li.textContent = strength;
                    document.getElementById('strengths-list').appendChild(li);
                });

                weaknesses.forEach(weakness => {
                    const li = document.createElement('li');
                    li.textContent = weakness;
                    document.getElementById('weaknesses-list').appendChild(li);
                });

                improve.forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = item;
                    document.getElementById('improve-list').appendChild(li);
                });

                websites.forEach(site => {
                    const li = document.createElement('li');
                    const a = document.createElement('a');
                    a.href = site;
                    a.textContent = site;
                    a.target = "_blank";
                    li.appendChild(a);
                    document.getElementById('websites-list').appendChild(li);
                });

                const programScores = {
                    "Science, Technology, and Engineering (SPSTE)": 0,
                    "Special Program for Technical-Vocational Education (SPTVE)": 0,
                    "Special Program in Foreign Language (SPFL)": 0,
                    "Special Program in Journalism (SPJ)": 0,
                    "Special Program in Sports (SPS)": 0,
                    "Special Program in the Arts (SPA)": 0
                };

                answers.forEach((item) => {
                    if (item.answer === 'yes') {
                        programScores[item.program]++;
                    }
                });

                const sortedPrograms = Object.keys(programScores).sort((a, b) => programScores[b] - programScores[a]);
                const sortedScores = sortedPrograms.map(program => (programScores[program] / totalQuestions) * 100);

                const ctx = document.getElementById('program-chart').getContext('2d');
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: sortedPrograms,
                        datasets: [{
                            label: 'Program Suitability (%)',
                            data: sortedScores,
                            backgroundColor: sortedPrograms.map((program, index) => index === 0 ? 'rgba(0, 123, 255, 0.5)' : 'rgba(169, 169, 169, 0.5)'),
                            borderColor: sortedPrograms.map((program, index) => index === 0 ? 'rgba(0, 123, 255, 1)' : 'rgba(169, 169, 169, 1)'),
                            borderWidth: 1
                        }]
                    },
                    options: {
                        indexAxis: 'y',
                        scales: {
                            x: {
                                beginAtZero: true,
                                grid: {
                                    display: false
                                },
                                ticks: {
                                    callback: function(value) {
                                        return value + '%';
                                    }
                                }
                            },
                            y: {
                                grid: {
                                    display: false
                                }
                            }
                        }
                    }
                });
            }
        });
    </script>
</body>
</html>
