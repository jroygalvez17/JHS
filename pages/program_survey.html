<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Program Survey - CSNHS</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background-color: #f8f9fa;
        }
        .survey-container, .result-container, .overview {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.18);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-top: 0px;
            min-height: 100%;
        }
        .survey-question {
            margin-bottom: 15px;
        }
        .survey-question h6 {
            margin-bottom: 10px;
        }
        .hidden {
            display: none;
        }
        .navbar .navbar-brand img {
            width: 40px;
            height: 40px;
            object-fit: cover;
            border-radius: 50%;
            margin-right: 10px;
        }
        .result-container {
            display: none;
            margin-top: 0px;
            min-height: 100%;
        }
        .result-container h4 {
            margin-bottom: 20px;
        }
        .result-container ul {
            list-style-type: disc;
            padding-left: 20px;
        }
        .result-container ul li {
            margin-bottom: 10px;
        }
        .bar-graph {
            margin-top: 20px;
        }
        .bar-container {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        .bar-label {
            width: 200px;
            text-align: left;
            margin-right: 10px;
        }
        .bar {
            height: 30px;
            background-color: #e9ecef;
            border-radius: 5px;
            flex-grow: 1;
            margin-right: 10px;
            position: relative;
        }
        .bar-inner {
            height: 100%;
            background-color: #007bff;
            border-radius: 5px;
            text-align: center;
            line-height: 30px;
            color: white;
            position: absolute;
            top: 0;
            left: 0;
        }
        .bar-percentage {
            width: 50px;
            text-align: right;
        }
        .two-columns {
            display: flex;
            justify-content: space-between;
        }
        .two-columns ul {
            width: 95%;
        }
        .overview, .result-container {
            min-height: 100%;
        }
        .progress {
            height: 20px;
            margin-top: 20px;
        }
        .progress-bar {
            width: 0;
        }
    </style>
    <script src="../js/surveyQuestions.js" defer></script>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm p-3">
        <div class="container">
            <!-- Logo Image -->
            <a class="navbar-brand d-flex align-items-center" href="home.html">
                <img src="https://scontent.fwnp1-1.fna.fbcdn.net/v/t39.30808-6/467730939_963078615844733_6145120696735646163_n.jpg?_nc_cat=107&ccb=1-7&_nc_sid=a5f93a&_nc_eui2=AeEnOPjmH9KWQ36FKaTkxNridZeiMYKnxH11l6IxgqfEfT1rxpwYhu-_0VYAoZqFoTJGA8SJHrU6Jt6Vs0vks1xz&_nc_ohc=AYHYDPuak0EQ7kNvgF4ecPM&_nc_oc=AdgxLJ6Qt-v_k1ba-2iGuMg1wYhzjk4ZdHTwJjI8os5VybXAyxmYrmjnkCYVhotlKzs&_nc_zt=23&_nc_ht=scontent.fwnp1-1.fna&_nc_gid=A1eq902KbYJc0hwV4Y0MDu2&oh=00_AYAkZ-Gz611AZsGfh-Rj9Lut-5lMP1TfTfOyoAOTzmI1FQ&oe=67CB6E7A" alt="CSNHS Logo">
                Camarines Sur National High School Program Checker
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="home.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="program_survey.html">Check my Program</a></li>
                    <li class="nav-item"><a class="nav-link" href="accomplishments.html">Gallery</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="container mt-4">
        <div class="row">
            <!-- Sidebar Start -->
            <aside class="col-md-5 sidebar">
                <div class="overview card">
                    <div class="card-body">
                        <div id="overview-content">
                            <h6>Overview of Camarines Sur National High School</h6>
                            <p style="text-align: justify;">
                                <b>Camarines Sur National High School (CSNHS)</b>, founded on <b>June 15, 1902</b>, is one
                                of the oldest and largest public secondary schools in the Bicol Region. Initially
                                established as the <b>Provincial High School of Nueva Caceres</b>, it later became
                                <b>Camarines High School</b> before being converted into CSNHS in 1969 under <b>Republic Act
                                    5529</b>. Over the decades, the school expanded its programs and facilities, emphasizing
                                academic excellence and holistic development.
                            </p>

                            <p style="text-align: justify;">
                                CSNHS offers specialized programs such as the <b>Science, Technology, and Engineering (STE)
                                    Program</b>, <b>Special Program in Foreign Language (SPFL)</b>, <b>Special Program in
                                    the Arts (SPA)</b>, <b>Special Program in Journalism (SPJ)</b>, <b>Special Program for
                                    Technical-Vocational Education (SPTVE)</b>, and <b>Special Program in Sports (SPS)</b>.
                                These programs cater to students' diverse talents and career aspirations, integrating
                                research, innovation, and skills development.
                            </p>

                            <p style="text-align: justify;">
                                Currently led by <b>Dr. Sulpicio C. Alferez III</b>, CSNHS continues to excel in academics,
                                sports, and extracurricular activities. It has produced top researchers, athletes, and
                                artists, receiving national and international recognition. The school remains committed to
                                providing quality education, fostering leadership, and preparing students for global
                                opportunities. Its legacy of excellence ensures that it remains a premier institution in the
                                region.
                            </p>
                        </div>
                    </div>
                </div>
            </aside>
            <!-- Sidebar End -->

            <main class="col-md-7">
                <div class="survey-container">
                    <h3 class="text-center">Program Survey</h3>
                    <p class="text-center">Answer the following questions to help determine which program is best suited for you.</p>
                    <form id="survey-form">
                        <!-- Questions will be dynamically loaded here -->
                    </form>
                    <!-- Navigation Buttons -->
                    <div class="text-center mt-4">
                        <button type="button" class="btn btn-primary" id="next-button">Next</button>
                    </div>
                    <div class="progress">
                        <div class="progress-bar bg-success" role="progressbar" id="progress-bar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                        <span id="progress-percentage" class="ms-2"></span>
                    </div>
                </div>
                <div class="result-container card">
                    <div class="card-body">
                        <h4>Recommended Program</h4>
                        <p id="recommended-program"></p>
                        <h5>Program Overview:</h5>
                        <p id="program-overview"></p>
                        <div class="two-columns">
                            <div>
                                <h5>What to Expect:</h5>
                                <ul id="expectations-list"></ul>
                            </div>
                            <div>
                                <h5>Checklist of Things to Prepare:</h5>
                                <ul id="checklist-list"></ul>
                            </div>
                        </div>
                        <h5>Program Suitability:</h5>
                        <div id="bar-graph" class="bar-graph"></div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const navbarToggler = document.querySelector('.navbar-toggler');
            const navbarCollapse = document.querySelector('.navbar-collapse');

            navbarToggler.addEventListener('click', function () {
                navbarCollapse.classList.toggle('show');
            });

            const surveyForm = document.getElementById('survey-form');
            surveyQuestions.forEach((item, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.classList.add('survey-question', 'hidden');
                questionDiv.id = `question-${index + 1}`;
                questionDiv.innerHTML = `
                    <h6>${index + 1}. ${item.question}</h6>
                    <input type="radio" name="q${index + 1}" value="yes"> Yes
                    <input type="radio" name="q${index + 1}" value="no"> No
                `;
                surveyForm.appendChild(questionDiv);
            });

            let currentQuestion = 1;
            const totalQuestions = surveyQuestions.length;
            const answers = [];

            document.getElementById(`question-${currentQuestion}`).classList.remove('hidden');

            document.getElementById('next-button').addEventListener('click', function () {
                const selectedOption = document.querySelector(`input[name="q${currentQuestion}"]:checked`);
                if (selectedOption) {
                    answers.push({ answer: selectedOption.value, program: surveyQuestions[currentQuestion - 1].program, weight: surveyQuestions[currentQuestion - 1].weight });
                    document.getElementById(`question-${currentQuestion}`).classList.add('hidden');
                    currentQuestion++;
                    updateProgressBar(currentQuestion - 1, totalQuestions);
                    if (currentQuestion <= totalQuestions) {
                        document.getElementById(`question-${currentQuestion}`).classList.remove('hidden');
                    } else {
                        const program = determineProgram(answers);
                        displayResults(program, answers);
                    }
                } else {
                    alert('Please select an answer before proceeding.');
                }
            });

            function updateProgressBar(current, total) {
                const progress = Math.min((current / total) * 100, 100);
                const progressBar = document.getElementById('progress-bar');
                progressBar.style.width = `${progress}%`;
                progressBar.setAttribute('aria-valuenow', progress);
                document.getElementById('progress-percentage').textContent = `${progress.toFixed(2)}%`;
            }

            function determineProgram(answers) {
                const programScores = {
                    "Science, Technology, and Engineering (SPSTE)": 0,
                    "Special Program for Technical-Vocational Education (SPTVE)": 0,
                    "Special Program in Foreign Language (SPFL)": 0,
                    "Special Program in Journalism (SPJ)": 0,
                    "Special Program in Sports (SPS)": 0,
                    "Special Program in the Arts (SPA)": 0
                };

                answers.forEach((item) => {
                    if (item.answer === 'yes') {
                        programScores[item.program] += parseFloat(item.weight);
                    }
                });

                return Object.keys(programScores).reduce((a, b) => programScores[a] > programScores[b] ? a : b);
            }

            function displayResults(program, answers) {
                document.querySelector('.survey-container').style.display = 'none';
                const resultContainer = document.querySelector('.result-container');
                resultContainer.style.display = 'block';

                document.getElementById('recommended-program').textContent = program;

                const programOverview = {
                    "Science, Technology, and Engineering (SPSTE)": "The Science, Technology, and Engineering (STE) Program focuses on advanced science courses, engineering projects, and research opportunities. It aims to develop students' analytical and problem-solving skills, preparing them for careers in science and engineering fields.",
                    "Special Program for Technical-Vocational Education (SPTVE)": "The Special Program for Technical-Vocational Education (SPTVE) offers hands-on technical training, industry certifications, and internship opportunities. It equips students with practical skills and knowledge for various technical and vocational careers.",
                    "Special Program in Foreign Language (SPFL)": "The Special Program in Foreign Language (SPFL) provides language immersion, cultural exchange programs, and advanced language courses. It aims to enhance students' proficiency in foreign languages and their understanding of different cultures.",
                    "Special Program in Journalism (SPJ)": "The Special Program in Journalism (SPJ) includes journalism workshops, school newspaper involvement, and media production. It develops students' writing, reporting, and media skills, preparing them for careers in journalism and media.",
                    "Special Program in Sports (SPS)": "The Special Program in Sports (SPS) involves intensive sports training, competitions, and fitness and nutrition education. It aims to develop students' athletic skills and promote a healthy lifestyle.",
                    "Special Program in the Arts (SPA)": "The Special Program in the Arts (SPA) features artistic workshops, performances and exhibitions, and creative projects. It nurtures students' artistic talents and creativity, preparing them for careers in the arts."
                };

                const expectations = {
                    "Science, Technology, and Engineering (SPSTE)": ["Advanced science courses", "Engineering projects", "Research opportunities"],
                    "Special Program for Technical-Vocational Education (SPTVE)": ["Hands-on technical training", "Industry certifications", "Internship opportunities"],
                    "Special Program in Foreign Language (SPFL)": ["Language immersion", "Cultural exchange programs", "Advanced language courses"],
                    "Special Program in Journalism (SPJ)": ["Journalism workshops", "School newspaper involvement", "Media production"],
                    "Special Program in Sports (SPS)": ["Intensive sports training", "Competitions", "Fitness and nutrition education"],
                    "Special Program in the Arts (SPA)": ["Artistic workshops", "Performances and exhibitions", "Creative projects"]
                };

                const checklist = {
                    "Science, Technology, and Engineering (SPSTE)": ["Scientific calculator", "Lab coat", "Research journal"],
                    "Special Program for Technical-Vocational Education (SPTVE)": ["Tool kit", "Safety gear", "Notebook"],
                    "Special Program in Foreign Language (SPFL)": ["Language dictionary", "Notebook", "Cultural materials"],
                    "Special Program in Journalism (SPJ)": ["Notebook", "Voice recorder", "Camera"],
                    "Special Program in Sports (SPS)": ["Sports gear", "Water bottle", "Fitness tracker"],
                    "Special Program in the Arts (SPA)": ["Art supplies", "Sketchbook", "Performance attire"]
                };

                document.getElementById('program-overview').textContent = programOverview[program];

                const expectationsList = document.getElementById('expectations-list');
                expectationsList.innerHTML = '';
                expectations[program].forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = item;
                    expectationsList.appendChild(li);
                });

                const checklistList = document.getElementById('checklist-list');
                checklistList.innerHTML = '';
                checklist[program].forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = item;
                    checklistList.appendChild(li);
                });

                const programScores = {
                    "Science, Technology, and Engineering (SPSTE)": 0,
                    "Special Program for Technical-Vocational Education (SPTVE)": 0,
                    "Special Program in Foreign Language (SPFL)": 0,
                    "Special Program in Journalism (SPJ)": 0,
                    "Special Program in Sports (SPS)": 0,
                    "Special Program in the Arts (SPA)": 0
                };

                answers.forEach((item) => {
                    if (item.answer === 'yes') {
                        programScores[item.program] += parseFloat(item.weight);
                    }
                });

                const sortedPrograms = Object.keys(programScores).sort((a, b) => programScores[b] - programScores[a]);
                const sortedScores = sortedPrograms.map(program => (programScores[program] / totalQuestions) * 100);

                const barGraphContainer = document.getElementById('bar-graph');
                barGraphContainer.innerHTML = '';
                sortedPrograms.forEach(program => {
                    const percentage = (programScores[program] / totalQuestions) * 100;
                    const barContainer = document.createElement('div');
                    barContainer.className = 'bar-container';
                    const barLabel = document.createElement('div');
                    barLabel.className = 'bar-label';
                    barLabel.textContent = program;
                    const bar = document.createElement('div');
                    bar.className = 'bar';
                    const barInner = document.createElement('div');
                    barInner.className = 'bar-inner';
                    barInner.style.width = `${percentage}%`;
                    barInner.textContent = `${percentage.toFixed(2)}%`;
                    const barPercentage = document.createElement('div');
                    barPercentage.className = 'bar-percentage';
                    barPercentage.textContent = `${percentage.toFixed(2)}%`;
                    bar.appendChild(barInner);
                    barContainer.appendChild(barLabel);
                    barContainer.appendChild(bar);
                    barContainer.appendChild(barPercentage);
                    barGraphContainer.appendChild(barContainer);
                });

                // Adjust the height of the overview container to match the result container
                const overviewContainer = document.querySelector('.overview');
                const resultContainerHeight = resultContainer.offsetHeight;
                overviewContainer.style.minHeight = `${resultContainerHeight}px`;
            }
        });
    </script>
</body>
</html>
